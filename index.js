const hironos = [
  {
    name: "Shelter Series Figures (set)",
    price: 239.88,
    inStock: true,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20240711_142219_014105____hirono-shelter-series-figures-blind-boxes-pop-mart-us-scene_1_____1200x1200.jpg",
    alt: "Hirono Shelter Series Figure Set",
  },
  {
    name: "Reshape Series Figures (set)",
    price: 179.91,
    inStock: true,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20231222_173158_703446__1200x1200.jpg",
    alt: "Hirono Reshape Series Figures Set",
  },
  {
    name: "Echo Series (set)",
    price: 239.88,
    inStock: true,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_151942_038282____scene_hirono-echo-series-figures_blind-boxes_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series Figures Set",
  },
  {
    name: "Mime Series (set)",
    price: 239.88,
    inStock: true,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250722_141750_244488____scene_hirono-mime-series-figures_blind-boxes_details_pop-mart-us_____1200x1200.jpg",
    alt: "Hirono Mime Series Figures Set",
  },
  {
    name: "Hirono × CLOT Series Figures (gift box)",
    price: 134.99,
    inStock: false,
    category: "Gift Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20241206_143522_759524____scene_hirono-clot-series-figures-gift-box-edition-_gift-box_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono × CLOT Series Figures (Gift Box Edition)",
  },
  {
    name: "Echo Fridge Magnet Clip Blind Box (set)",
    price: 89.94,
    inStock: false,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_154013_961838____scene_hirono-echo-series-fridge-magnet-clip-blind-box_fridge-magnet-clip_accessories_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series - Pendant Chain Blind Box",
  },
  {
    name: "The Pianist Figure",
    price: 53.99,
    inStock: false,
    category: "Figurine",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250523_172227_605184____2_hirono-the-pianist-figure_figurine_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono The Pianist Figure",
  },
  {
    name: "Doll Panda Figure",
    price: 37.99,
    inStock: false,
    category: "Figurine",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20241018_092745_949626____scene-2_____1200x1200.jpg",
    alt: "Hirono Doll Panda Figure",
  },
  {
    name: "Ceramic Feather Figurine",
    price: 156.99,
    inStock: true,
    category: "Figurine",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20241213_113435_266035____scene_1_hirono-ceramic-feather-figurine_figurine_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Ceramic Feather Figurine",
  },
  {
    name: "Hirono x Snoopy Figure",
    price: 43.99,
    inStock: true,
    category: "Figurine",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_161125_866367____scene_1_hirono-x-snoopy-figure_figurine_details_pop-mart-us_____1200x1200.jpg",
    alt: "Hirono x Snoopy Figure",
  },
  {
    name: "Living Wild-Fight for Joy Plush Doll",
    price: 50.99,
    inStock: true,
    category: "Plush Doll",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250620_181624_653153____2_hirono-living-wild-fight-for-joy-plush-doll_plush-toys_-details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Living Wild-Fight for Joy Plush Doll",
  },
  {
    name: "Echo Series - 3D Ceramic Cup",
    price: 44.99,
    inStock: true,
    category: "Houseware",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_154235_851285____scene_1_-hirono-echo-series-3d-ceramic-cup_accessories_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series - 3D Ceramic Cup",
  },
  {
    name: "Echo Series - 2 in 1 Cable Blind Box",
    price: 119.94,
    inStock: true,
    category: "Personal Items",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_154729_120465____scene_-hirono-echo-series-2-in-1-cable-blind-box_blind-boxes_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series Cables Blind Box",
  },
  {
    name: "Echo Series - Mini Bag Blind Box",
    price: 125.94,
    inStock: true,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_155436_709486____scene-hirono-echo-series-mini-bag-blind-box_blind-boxes_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series Mini Bag Box",
  },
  {
    name: "Echo Series - Table Lamp",
    price: 73.99,
    inStock: true,
    category: "Houseware",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_155820_656286____scene_hirono-echo-series-table-lamp_accessories_details_popmart-us_____4x269.jpg",
    alt: "Hirono Echo Series - Table Lamp",
  },
  {
    name: "Echo Series - Passport Bag",
    price: 25.99,
    inStock: true,
    category: "Personal Items",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_160446_235292____scene_1_hirono-echo-series-passport-bag_accessories_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series - Table Lamp",
  },
  {
    name: "Hirono Listening; Saying; Seeing Figure (set)",
    price: 144.99,
    inStock: false,
    category: "Figurine",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20231102_155828_700367__1200x1200.jpg",
    alt: "Hirono Listening; Saying; Seeing Figure Set",
  },
  {
    name: "Echo Series - Phone Case",
    price: 33.99,
    inStock: false,
    category: "Personal Items",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250403_160239_642642____scene_1hirono-echo-series-phone-case_accessories_details_popmart-us_____1200x1200.jpg",
    alt: "Hirono Echo Series-Phone Case",
  },
  {
    name: "Mime Series - Fragrance Blind Box (set)",
    price: 89.94,
    inStock: false,
    category: "Blind Box",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/scene_uHwykd9d8D_1200x1200.jpg",
    alt: "Hirono Mime Series-Fragrance Blind Box",
  },
  {
    name: "Hirono Bear Vinyl Plush Doll",
    price: 114.99,
    inStock: true,
    category: "Plush Doll",
    brand: "Hirono",
    img: "https://prod-america-res.popmart.com/default/20250808_175931_649719____3_hirono-bear-vinyl-plush-doll_plush-toys_details_pop-mart-us_____1200x1200.jpg",
    alt: "Hirono Bear Vinyl Plush Doll",
  },
];

let cart = [];

/*products*/
function inject(hironos) {
  const container = document.querySelector(".container");
  container.insertAdjacentHTML(
    "beforeend",
    `<div class = "card" data-cat=${hironos.category}>
     <img src=${hironos.img} alt = ${hironos.alt} />
     <h2>${hironos.brand}</h2>
     <h3>${hironos.name}</h3>
     <p>$${hironos.price}</p>
     <button class="cart_button">Add to Cart</button>
     </div>`
  );
}

hironos.forEach((h) => inject(h));

function addtoCart() {
  const buttons = document.querySelectorAll(".cart_button");
  const btnArray = Array.from(buttons);

  btnArray.forEach((btn) =>
    btn.addEventListener("click", function (event) {
      const card = event.target.closest(".card");
      const name = card.querySelector("h3").textContent;
      const priceText = card.querySelector("p").textContent.replace("$", "");
      const price = parseFloat(priceText);
      const imgSrc = card.querySelector("img").src;

      const item = { name, price, imgSrc, quantity: 1 };
      const existing = cart.find((hironos) => hironos.name === name);

      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push(item);
      }
      displayCart();
      showCart();
    })
  );
}

addtoCart();

/*cart*/
displayCart();

function displayCart() {
  const cartContainer = document.querySelector(".cart__items");
  const totalDisplay = document.getElementById("cart-total");
  const itemCount = document.getElementById("item-count");

  cartContainer.innerHTML = "";

  let subtotal = 0;
  let totalItems = 0;

  cart.forEach((item) => {
    const itemTotal = item.price * item.quantity;
    subtotal += itemTotal;
    totalItems += item.quantity;

    cartContainer.insertAdjacentHTML(
      "beforeend",
      `
      <div class="cart__item">
        <h5>${item.name}</h5>
        <h6>Qty: ${item.quantity}</h6>
        <h3>$${item.price.toFixed(2)}</h3>
      </div>
    `
    );
  });

  totalDisplay.textContent = subtotal.toFixed(2);
  itemCount.textContent = `${totalItems} ${
    totalItems === 1 ? "Item" : "Items"
  }`;
}

function showCart() {
  document.querySelector(".cart").classList.remove("hidden");
}

/*filtering*/
function filterByCategory(category) {
  const filterItem = document.querySelectorAll(".filtering");
  const cards = document.querySelectorAll(".card")
  cards.forEach((card) => {
    if (selectedCategory === "all" || card.Category === selectedCategory){
      card.style.display = '';
    } else {
      card.style.display = "none";
    };
  });
};

  /* filterItem.forEach((btn) =>
    btn.addEventListener("click", function (event) {
      hironos.filter((hironos) => hironos.category === category);
      console.log(filterItem);
    })
  ); */

function setupFilterButtons() {
  const filterButtons = document.querySelectorAll(".filtering");
  filterButtons.forEach((button) => {
    button.addEventListener("click", function (event) {
      console.log(event.target.textContent);
      filterByCategory(event.target.textContent);
      addtoCart();
    });
  });
}

filterByCategory("Personal Items");

/*if (category === cardCategory) {
    cards.style.display = ""; //contextual
  } else {
    cards.style.display = "none";
  }
}*/

/*add a remove btn gngy TOT
function removeItem(){
  :333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333*/